<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discipulado Virtual</title>
    <link rel="icon" href="../imagenes/Palabra.png" type="image/png">
    <meta name="description" content="Esta pagina web trata sobre una iglesia cristiana llamada Iglesia de Cristo Palabra Viva y Eficaz ubicada en Barberena Santa Rosa que forma parte de Ministerios Ebenezer Guatemala">
    <meta name="keywords" content="Iglesia Cristiana, Iglesia Barberena, Iglesia Santa Rosa, Iglesia Ebenezer, Ebenezer Barberena, Iglesia, Palabra Viva y Eficaz, Iglesia de Cristo">
    <link rel="stylesheet" href="../styles.css">
</head>
    <body>
        <!--Encabezado-->
    <div id="encabezado">
        <div class="logo-nombre">
            <img class="logo" src="../imagenes/PalabraP.png" alt="Logo Palabra Viva y Eficaz">   
            <h2 class="nombrei">Palabra Viva y Eficaz</h2>
        </div>
            
        <nav class="menu">
            <input type="checkbox" id="menu-toggle">
            <label for="menu-toggle" class="menu-icon"> Menú &#9776;</label>

        <ul class="menu-items">
            <li><a href="../#inicio">Inicio</a></li>
            <li><a href="../#horarios">Horarios</a></li>
            <li><a href="../#contacto">Contacto</a></li>
            <li><a href="../Enlaces/Transmision.html">Transmisión en Vivo</a></li>
            <li><a href="../Enlaces/Discipulado.html">Discipulado Virtual</a></li>
        </ul>
        </nav>
    </div>
    <main class="playlist">
    <!-- Contenedor dentro del <main> o donde desees mostrar los videos -->
    <section class="youtube-playlist">
        <h2 class="playlist__titulo">Discipulado Virtual</h2>
        <div id="video-container" class="playlist__videos"></div>
        <button id="load-more" class="playlist__boton">Cargar más</button>
    </section>

<!-- Aquí colocas el script, justo antes del cierre de body -->
    <script>
const apiKey = "AIzaSyAhxhUUGHUcnYtOO0FYY9DhA5Ku5rjlIA4";
const playlistId = "PLtN3SIZuaGTseOSxP9F3AJaoJPhMilY-h";
const container = document.getElementById("video-container");
const loadMoreBtn = document.getElementById("load-more");

let nextPageToken = "";
let maxResults = 12;
let loading = false;

async function loadVideos() {
    if (loading) return;
    loading = true;
    loadMoreBtn.disabled = true;
    loadMoreBtn.innerText = "Cargando...";

    const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${playlistId}&maxResults=${maxResults}&key=${apiKey}&pageToken=${nextPageToken}`;

    try {
        const res = await fetch(url);
        const data = await res.json();

        nextPageToken = data.nextPageToken || "";

        data.items.forEach(item => {
            const videoId = item.snippet.resourceId.videoId;
            const title = item.snippet.title;
            const thumbnail = item.snippet.thumbnails.medium.url;

            const div = document.createElement("div");
            div.classList.add("playlist__video");

            // Miniatura + botón de play
            div.innerHTML = `
            <div class="thumbnail-container" data-videoid="${videoId}">
                <img src="${thumbnail}" alt="${title}" class="video-thumbnail">
                <img src="../imagenes/13.png" alt="Play" class="play-button-img">
            </div>
            <p class="playlist__titulo-video">${title}</p>
        `;

            container.appendChild(div);
        });

        // Evento: al hacer clic en la miniatura, reemplazar con iframe
        document.querySelectorAll(".thumbnail-container").forEach(el => {
            el.addEventListener("click", function () {
                const videoId = el.getAttribute("data-videoid");
                const iframe = document.createElement("iframe");
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                iframe.setAttribute("frameborder", "0");
                iframe.setAttribute("allowfullscreen", "");
                iframe.setAttribute("allow", "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture");
                iframe.setAttribute("title", "Video de YouTube");
                el.replaceWith(iframe);
            });
        });

            if (!nextPageToken) {
                loadMoreBtn.style.display = "none";
            } else {
                loadMoreBtn.disabled = false;
                loadMoreBtn.innerText = "Cargar más";
            }

        } catch (err) {
            console.error("Error al cargar videos", err);
            loadMoreBtn.innerText = "Error";
        }

        loading = false;
    }

    loadMoreBtn.addEventListener("click", loadVideos);
    loadVideos();
</script>


    </main>

    <footer class="footer">
        <div class="footer__col">
            <div class="footer__logo-nombre">
                <img src="../imagenes/PalabraP.png" alt="Logo Palabra Viva y Eficaz" class="footer__logo">
                <h2 class="footer__nombre">Palabra Viva y Eficaz</h2>
            </div>
            <p class="footer__versiculo">"Porque la palabra de Dios es viva y eficaz, y más cortante que cualquier espada de dos filos..."</p>
            <div class="footer__redes">
                <h3 class="footer__titulo">Redes Sociales</h3>
                <a href="https://www.facebook.com/IglesiadeCristoPalabraVivayEficaz/" target="_blank">Página de la iglesia</a>
                <a href="https://www.facebook.com/PastorLuisAifanD/" target="_blank">Perfil del Pastor</a>
                <a href="https://www.facebook.com/Generacionpeniel.ministeriosebenezer" target="_blank">Página de Jóvenes</a>
                <a href="https://www.youtube.com/channel/UC9t4SN1s5jdO0KJBUFflxJQ" target="_blank">Canal de YouTube</a>
            </div>
        </div>

        <div class="footer__bloque">
            <h2 class="footer__titulo">Enlaces Rápidos</h2>
            <a href="#inicio">Inicio</a>
            <a href="#horarios">Horarios</a>
            <a href="#contacto">Contacto</a>
        </div>

        <div class="footer__copy">
            <p>© 2025 Iglesia de Cristo Palabra Viva y Eficaz. Todos los derechos reservados.</p>
        </div>
    </footer>
        
    </body>
</html>